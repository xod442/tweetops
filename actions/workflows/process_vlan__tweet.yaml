version: '1.0'

description: A workflow that gets a trigger from twitter and processes the data.

input:
  - trigger


tasks:
  format_tweet:
    action: tweetops.format_tweet
    input:
      trigger: "<% ctx().trigger %>"
    next:
      - when: <% succeeded() %>
        publish:
          - data: <% result().stdout %>
        do: send_to_hpecfm

  send_to_hpecfm:
    action: hpecfm.post_vlan
    input:
      data: "<% ctx().data %>"
